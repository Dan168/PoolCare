<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pool Maintenance Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
     <link
      rel="icon"
      type="image/x-icon"
      href="/img/branding/pool_care_app_logo.png"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="style.css" />
    <script src="sidebar.css"></script>
    <script src="sidebar.js"></script>
    <link rel="manifest" href="manifest.json">
  </head>
  <body id="body-pd" onload="updateTime()">
    <header class="header" id="header">
      
        <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
        <div class="header_img"> <img src="img/svg/abstract-user-flat-3.svg" alt=""> </div>
    </header>
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div> <a href="https://poolcare.app/" class="nav_logo"> <img style="height: 20px;" src="img/branding/pool_care_app_logo_white.png" alt="Pool Care App Logo"> <span class="nav_logo-name">Pool Care App</span> </a>
                <div class="nav_list"> <a href="#" class="nav_link active"> 
                  <i class='bx bx-grid-alt nav_icon'></i> <span class="nav_name">Dashboard</span> </a> 
                  <a href="#" class="nav_link"> <i class='bx bx-bar-chart-alt-2 nav_icon'></i> <span class="nav_name">Back Washing</span> </a> 
                  <a href="#" class="nav_link"> <i class='bx bx-wrench nav_icon'></i> <span class="nav_name">Maintenance</span> </a> 
                  <a href="#" class="nav_link"> <i class='bx bx-message-square-detail nav_icon'></i> <span class="nav_name">Ask Me</span> </a>
                  <a href="#" class="nav_link"> <i class='bx bx-folder nav_icon'></i> <span class="nav_name">Archive</span> </a>
                  <!-- <a href="#" class="nav_link"> <i class='bx bx-bar-chart-alt-2 nav_icon'></i> <span class="nav_name">Stats</span> </a> </div> -->
            </div> <a href="#" class="nav_link"> <i class='bx bx-log-out nav_icon'></i> <span class="nav_name">Sign Out</span> </a>
        </nav>
    </div>
    <!-- /#sidebar-wrapper -->
    <!--Container Main start-->
    <div class="height-100 bg-light">


      <!-- Page Content -->

        <div class="container-fluid pt-4">

          <div class="">


            <h1 class="">David Lloyd - Solihull Cranmore</h1>
            <p id="last-updated">Last Updated </p>
          </div>
          <!-- Pool Boxes -->
          <div class="row mb-4" id="pool-container">
            <!-- Add more pool cards here -->
          </div>

          <!-- Graph Boxes -->
          <div class="row">
            <div class="col-lg-6 mb-4">
              <div class="card shadow-lg bg-white text-dark">
                <div class="card-header">
                  <h5 class="card-title">pH Level Readings</h5>
                </div>
                <div class="card-body">
                  <canvas id="phChart"></canvas>
                </div>
              </div>
            </div>
            <div class="col-lg-6 mb-4">
              <div class="card shadow-lg bg-white text-dark">
                <div class="card-header">
                  <h5 class="card-title">Temperature Readings</h5>
                </div>
                <div class="card-body">
                  <canvas id="temperatureChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-6 mb-4">
              <div class="card shadow-lg bg-white text-dark">
                <div class="card-header">
                  <h5 class="card-title">Free Chlorine Readings</h5>
                </div>
                <div class="card-body">
                  <canvas id="fchlorinechart"></canvas>
                </div>
              </div>
            </div>
            <div class="col-lg-6 mb-4">
              <div class="card shadow-lg bg-white text-dark">
                <div class="card-header">
                  <h5 class="card-title">Out of Parameter Tests</h5>
                </div>
                <div class="card-body">
                  <canvas id="outOfParameterChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /#page-content-wrapper -->
    </div>


    <!-- /#wrapper -->

    <!-- Modal -->
    <div
      class="modal fade"
      id="addTestModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="addTestModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <form id="addTestForm">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addTestModalLabel">Add Test</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="poolSelect">Select Pool</label>
                <select class="form-control" id="poolSelect" name="poolSelect">
                  <option value="1">Pool 1</option>
                  <option value="2">Pool 2</option>
                  <option value="3">Pool 3</option>
                  <option value="4">Pool 4</option>
                  <option value="5">Pool 5</option>
                </select>
              </div>
              <div class="form-group">
                <label for="chlorineLevel">Free Chlorine Level (ppm)</label>
                <input
                  type="float"
                  class="form-control"
                  id="chlorineLevel"
                  name="chlorineLevel"
                  placeholder="Enter chlorine level"
                />
              </div>
              <div class="form-group">
                <label for="combinedChlorine"
                  >Combined Chlorine Level (ppm)</label
                >
                <input
                  type="float"
                  class="form-control"
                  id="combinedChlorine"
                  name="combinedChlorine"
                  placeholder="Enter combined chlorine level"
                />
              </div>
              <div class="form-group">
                <label for="temperature">Temperature (Â°C)</label>
                <input
                  type="float"
                  class="form-control"
                  id="temperature"
                  name="temperature"
                  placeholder="Enter temperature"
                />
              </div>
              <div class="form-group">
                <label for="clarity">Water clarity (1-5)</label>
                <input
                  type="number"
                  class="form-control"
                  id="clarity"
                  name="clarity"
                  placeholder="Enter water clarity"
                />
              </div>
              <div class="form-group">
                <label for="name">Tester's name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  name="name"
                  placeholder="Enter your name"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Close
              </button>
              <button type="submit" class="btn btn-primary">Save test</button>
            </div>
          </div>
        </form>
      </div>
    </div>
      </body>


    <!-- Bootstrap core JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <script>
      var ctx1 = document.getElementById("phChart").getContext("2d");
      var phChart = new Chart(ctx1, {
        type: "line",
        data: {
          labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          datasets: [
            {
              label: "Pool 1",
              data: [7.0, 7.2, 7.1, 7.3, 7.4, 7.2, 7.1],
              backgroundColor: "rgba(0, 123, 255, 0.2)",
              borderColor: "rgba(0, 123, 255, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 2",
              data: [7.4, 7.3, 7.3, 6.8, 6.8, 7.0, 7.0],
              backgroundColor: "rgba(255, 99, 132, 0.2)",
              borderColor: "rgba(255, 99, 132, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 3",
              data: [7.2, 7.1, 7.3, 7.2, 7.4, 7.1, 7.0],
              backgroundColor: "rgba(255, 206, 86, 0.2)",
              borderColor: "rgba(255, 206, 86, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var ctx2 = document.getElementById("temperatureChart").getContext("2d");
      var temperatureChart = new Chart(ctx2, {
        type: "line",
        data: {
          labels: [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
          ],
          datasets: [
            {
              label: "Pool 1",
              data: [25, 26, 24, 27, 26, 25, 25],
              backgroundColor: "rgba(0, 123, 255, 0.2)",
              borderColor: "rgba(0, 123, 255, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 2",
              data: [26, 27, 25, 28, 27, 26, 26],
              backgroundColor: "rgba(255, 99, 132, 0.2)",
              borderColor: "rgba(255, 99, 132, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 3",
              data: [24, 25, 23, 26, 25, 24, 24],
              backgroundColor: "rgba(255, 206, 86, 0.2)",
              borderColor: "rgba(255, 206, 86, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      var ctx3 = document
        .getElementById("outOfParameterChart")
        .getContext("2d");
      var outOfParameterChart = new Chart(ctx3, {
        type: "pie",
        data: {
          labels: ["Pool 1", "Pool 2", "Pool 3"],
          datasets: [
            {
              label: "Out of Parameter Tests",
              data: [2, 3, 1],
              backgroundColor: [
                "rgba(0, 123, 255, 0.7)",
                "rgba(255, 99, 132, 0.7)",
                "rgba(255, 206, 86, 0.7)",
              ],
              borderColor: [
                "rgba(0, 123, 255, 1)",
                "rgba(255, 99, 132, 1)",
                "rgba(255, 206, 86, 1)",
              ],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: "top",
            },
            tooltip: {
              callbacks: {
                label: function (tooltipItem) {
                  return tooltipItem.label + ": " + tooltipItem.raw + " tests";
                },
              },
            },
          },
        },
      });

      var ctx4 = document.getElementById("fchlorinechart").getContext("2d");
      var fchlorinechart = new Chart(ctx4, {
        type: "line",
        data: {
          labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          datasets: [
            {
              label: "Pool 1",
              data: [0.5, 1.0, 1.0, 1.5, 0.2, 1.0, 1.0],
              backgroundColor: "rgba(0, 123, 255, 0.2)",
              borderColor: "rgba(0, 123, 255, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 2",
              data: [1.0, 1.0, 1.0, 1.5, 3.0, 1.5, 1.0],
              backgroundColor: "rgba(255, 99, 132, 0.2)",
              borderColor: "rgba(255, 99, 132, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 3",
              data: [4.5, 4.0, 4.0, 5.0, 5.0, 5.0, 4.0],
              backgroundColor: "rgba(255, 206, 86, 0.2)",
              borderColor: "rgba(255, 206, 86, 1)",
              borderWidth: 1,
            },
            {
              label: "Pool 4",
              data: [1.5, 1.5, 0.0, 2.0, 0.2, 1.0, 3.0],
              backgroundColor: "rgb(113,16,152)",
              borderColor: "rgb(208,82,255)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="main-ajax.js"></script>
    <script src="time.js"></script>
    <script>
    window.addEventListener('load', () => {
      registerSW();
    });
 
    // Register the Service Worker
    async function registerSW() {
      if ('serviceWorker' in navigator) {
        try {
          await navigator
                .serviceWorker
                .register('serviceworker.js');
        }
        catch (e) {
          console.log('SW registration failed');
        }
      }
    }

    Notification.requestPermission().then(function(permission) {
      if (permission === 'granted') {
        console.log('Notification permission granted.');
      } else {
        console.log('Unable to get permission to notify.');
      }
    });

    self.addEventListener('push', function(event) {
      const title = 'New Message';
      const options = {
        body: 'Hello, world!',
      };
    event.waitUntil(self.registration.showNotification(title, options));
    });
 </script>

  </body>
</html>
